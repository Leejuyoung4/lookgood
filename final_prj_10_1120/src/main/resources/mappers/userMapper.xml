<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.oo.user.model.dao.UserDao">
	<!-- 전체 사용자 조회 -->
	<select id="selectAllUser" resultType="User">
		select *
		from user
	</select>

	<!-- 상세페이지에서 특정 사용자 조회 -->
	<select id="selectUserByUserNo" resultType="User"
		parameterType="int">
		select *
		from user
		where user_no = #{userNo}
	</select>

	<!-- 로그인에서 특정 사용자 조회 -->
	<select id="selectOne" parameterType="Map" resultType="User">
		SELECT user_id,
		user_name
		FROM user
		WHERE user_id = #{userId} AND password = #{password}
	</select>

	<!-- 회원가입 사용자 정보 DB에 삽입 -->
	<insert id="insertUser" parameterType="User">
		INSERT INTO user (user_id, password, user_name, email, phone_num)
		VALUES (#{userId}, #{password}, #{userName}, #{email}, #{phoneNum});
	</insert>


	<!-- 회원정보 수정 -->
	<update id="updateUser" parameterType="User">
		UPDATE user
		SET
		user_name = #{userName},
		email = #{email},
		password = #{password}
		WHERE user_no = #{userNo}
	</update>

	<!-- 회원탈퇴 -->
	<delete id="deleteUser" parameterType="int">
		DELETE
		FROM user
		WHERE user_no = #{userNo}
	</delete>
	
	<!-- 아이디 중복확인 -->
	<select id="countByUserId" parameterType="String" resultType="int">
        SELECT COUNT(*) FROM user WHERE user_id = #{userId}
    </select>

</mapper>